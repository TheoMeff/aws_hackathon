{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { useEffect, useState } from 'react';\nimport { findUpUntil } from '@cloudscape-design/component-toolkit/dom';\nimport { awsuiPluginsInternal } from '../../internal/plugins/api';\nexport const useRuntimeDrawerContext = ({\n  rootRef\n}) => {\n  const [drawerContext, setDrawerContext] = useState(null);\n  useEffect(() => {\n    var _a, _b;\n    // Determine if the hook is inside a runtime drawer.\n    // There’s no other reliable way to check this, since runtime drawers are separate applications rendered into specific DOM nodes.\n    if (!(rootRef === null || rootRef === void 0 ? void 0 : rootRef.current)) {\n      return;\n    }\n    const runtimeDrawerWrapper = findUpUntil(rootRef === null || rootRef === void 0 ? void 0 : rootRef.current, node => {\n      var _a;\n      return !!((_a = node === null || node === void 0 ? void 0 : node.dataset) === null || _a === void 0 ? void 0 : _a.awsuiRuntimeDrawerRootId);\n    });\n    const drawerId = (_a = runtimeDrawerWrapper === null || runtimeDrawerWrapper === void 0 ? void 0 : runtimeDrawerWrapper.dataset) === null || _a === void 0 ? void 0 : _a.awsuiRuntimeDrawerRootId;\n    if (!drawerId) {\n      return;\n    }\n    const drawers = awsuiPluginsInternal.appLayout.getDrawersState();\n    setDrawerContext((_b = drawers === null || drawers === void 0 ? void 0 : drawers.find(drawer => drawer.id === drawerId)) !== null && _b !== void 0 ? _b : null);\n    return awsuiPluginsInternal.appLayout.onDrawersUpdated(drawers => {\n      var _a;\n      setDrawerContext((_a = drawers === null || drawers === void 0 ? void 0 : drawers.find(drawer => drawer.id === drawerId)) !== null && _a !== void 0 ? _a : null);\n    });\n  }, [rootRef]);\n  return drawerContext;\n};","map":{"version":3,"names":["useEffect","useState","findUpUntil","awsuiPluginsInternal","useRuntimeDrawerContext","rootRef","drawerContext","setDrawerContext","current","runtimeDrawerWrapper","node","_a","dataset","awsuiRuntimeDrawerRootId","drawerId","drawers","appLayout","getDrawersState","_b","find","drawer","id","onDrawersUpdated"],"sources":["/Users/theo/Library/CloudStorage/OneDrive-RackspaceInc/Documents/aws_hackathon/react-client/node_modules/src/app-layout/runtime-drawer/use-runtime-drawer-context.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { RefObject, useEffect, useState } from 'react';\n\nimport { findUpUntil } from '@cloudscape-design/component-toolkit/dom';\n\nimport { awsuiPluginsInternal } from '../../internal/plugins/api';\nimport { DrawerConfig } from '../../internal/plugins/controllers/drawers';\n\nexport const useRuntimeDrawerContext = ({ rootRef }: { rootRef: RefObject<HTMLElement> }) => {\n  const [drawerContext, setDrawerContext] = useState<DrawerConfig | null>(null);\n\n  useEffect(() => {\n    // Determine if the hook is inside a runtime drawer.\n    // There’s no other reliable way to check this, since runtime drawers are separate applications rendered into specific DOM nodes.\n    if (!rootRef?.current) {\n      return;\n    }\n    const runtimeDrawerWrapper = findUpUntil(rootRef?.current, node => !!node?.dataset?.awsuiRuntimeDrawerRootId);\n    const drawerId = runtimeDrawerWrapper?.dataset?.awsuiRuntimeDrawerRootId;\n\n    if (!drawerId) {\n      return;\n    }\n\n    const drawers = awsuiPluginsInternal.appLayout.getDrawersState();\n    setDrawerContext(drawers?.find(drawer => drawer.id === drawerId) ?? null);\n\n    return awsuiPluginsInternal.appLayout.onDrawersUpdated(drawers => {\n      setDrawerContext(drawers?.find(drawer => drawer.id === drawerId) ?? null);\n    });\n  }, [rootRef]);\n\n  return drawerContext;\n};\n"],"mappings":"AAAA;AACA;AACA,SAAoBA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAEtD,SAASC,WAAW,QAAQ,0CAA0C;AAEtE,SAASC,oBAAoB,QAAQ,4BAA4B;AAGjE,OAAO,MAAMC,uBAAuB,GAAGA,CAAC;EAAEC;AAAO,CAAuC,KAAI;EAC1F,MAAM,CAACC,aAAa,EAAEC,gBAAgB,CAAC,GAAGN,QAAQ,CAAsB,IAAI,CAAC;EAE7ED,SAAS,CAAC,MAAK;;IACb;IACA;IACA,IAAI,EAACK,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEG,OAAO,GAAE;MACrB;;IAEF,MAAMC,oBAAoB,GAAGP,WAAW,CAACG,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEG,OAAO,EAAEE,IAAI,IAAG;MAAA,IAAAC,EAAA;MAAC,QAAC,EAAC,CAAAA,EAAA,GAAAD,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEE,OAAO,cAAAD,EAAA,uBAAAA,EAAA,CAAEE,wBAAwB;IAAA,EAAC;IAC7G,MAAMC,QAAQ,GAAG,CAAAH,EAAA,GAAAF,oBAAoB,aAApBA,oBAAoB,uBAApBA,oBAAoB,CAAEG,OAAO,cAAAD,EAAA,uBAAAA,EAAA,CAAEE,wBAAwB;IAExE,IAAI,CAACC,QAAQ,EAAE;MACb;;IAGF,MAAMC,OAAO,GAAGZ,oBAAoB,CAACa,SAAS,CAACC,eAAe,EAAE;IAChEV,gBAAgB,CAAC,CAAAW,EAAA,GAAAH,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEI,IAAI,CAACC,MAAM,IAAIA,MAAM,CAACC,EAAE,KAAKP,QAAQ,CAAC,cAAAI,EAAA,cAAAA,EAAA,GAAI,IAAI,CAAC;IAEzE,OAAOf,oBAAoB,CAACa,SAAS,CAACM,gBAAgB,CAACP,OAAO,IAAG;;MAC/DR,gBAAgB,CAAC,CAAAI,EAAA,GAAAI,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEI,IAAI,CAACC,MAAM,IAAIA,MAAM,CAACC,EAAE,KAAKP,QAAQ,CAAC,cAAAH,EAAA,cAAAA,EAAA,GAAI,IAAI,CAAC;IAC3E,CAAC,CAAC;EACJ,CAAC,EAAE,CAACN,OAAO,CAAC,CAAC;EAEb,OAAOC,aAAa;AACtB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
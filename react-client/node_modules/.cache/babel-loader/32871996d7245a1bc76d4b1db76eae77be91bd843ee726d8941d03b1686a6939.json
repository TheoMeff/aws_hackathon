{"ast":null,"code":"import { __rest } from \"tslib\";\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useContext } from 'react';\nimport clsx from 'clsx';\nimport { getAnalyticsMetadataAttribute } from '@cloudscape-design/component-toolkit/internal/analytics-metadata';\nimport InternalCheckbox from '../../checkbox/internal';\nimport { SingleTabStopNavigationContext } from '../../internal/context/single-tab-stop-navigation-context';\nimport { useUniqueId } from '../../internal/hooks/use-unique-id';\nimport { KeyCode } from '../../internal/keycode';\nimport RadioButton from '../../radio-group/radio-button';\nimport styles from './styles.css.js';\nexport function SelectionControl(_a) {\n  var {\n      selectionType,\n      indeterminate = false,\n      onShiftToggle,\n      onFocusUp,\n      onFocusDown,\n      name,\n      ariaLabel,\n      focusedComponent,\n      rowIndex,\n      itemKey,\n      verticalAlign = 'middle'\n    } = _a,\n    sharedProps = __rest(_a, [\"selectionType\", \"indeterminate\", \"onShiftToggle\", \"onFocusUp\", \"onFocusDown\", \"name\", \"ariaLabel\", \"focusedComponent\", \"rowIndex\", \"itemKey\", \"verticalAlign\"]);\n  const controlId = useUniqueId();\n  const isMultiSelection = selectionType === 'multi';\n  const {\n    navigationActive\n  } = useContext(SingleTabStopNavigationContext);\n  const setShiftState = event => {\n    if (isMultiSelection) {\n      onShiftToggle === null || onShiftToggle === void 0 ? void 0 : onShiftToggle(event.shiftKey);\n    }\n  };\n  const onMouseDownHandler = event => {\n    setShiftState(event);\n    if (isMultiSelection) {\n      // To overcome an issue\n      // If you shift+click or ctrl+click on a label for a checkbox, checkbox is not checked.\n      // https://bugzilla.mozilla.org/show_bug.cgi?id=559506\n      event.preventDefault();\n    }\n  };\n  // native checkboxes do not have focus move via keyboard, we implement it here programmatically\n  const handleKeyDown = event => {\n    setShiftState(event);\n    if (isMultiSelection && !navigationActive) {\n      if (event.keyCode === KeyCode.up) {\n        event.preventDefault();\n        onFocusUp === null || onFocusUp === void 0 ? void 0 : onFocusUp(event);\n      }\n      if (event.keyCode === KeyCode.down) {\n        event.preventDefault();\n        onFocusDown === null || onFocusDown === void 0 ? void 0 : onFocusDown(event);\n      }\n    }\n  };\n  const handleClick = event => {\n    const target = event.currentTarget;\n    const nativeInput = target.tagName === 'INPUT' ? target : target.querySelector('input');\n    // Clicking on input, does not focus it on Firefox (AWSUI-11345)\n    nativeInput === null || nativeInput === void 0 ? void 0 : nativeInput.focus();\n  };\n  const selector = isMultiSelection ? React.createElement(InternalCheckbox, Object.assign({}, sharedProps, {\n    showOutline: focusedComponent === 'selection-control',\n    controlId: controlId,\n    \"data-focus-id\": \"selection-control\",\n    indeterminate: indeterminate\n  })) : React.createElement(RadioButton, Object.assign({}, sharedProps, {\n    controlId: controlId,\n    name: name,\n    value: '',\n    label: ''\n  }));\n  return React.createElement(React.Fragment, null, React.createElement(\"label\", Object.assign({\n    onKeyDown: handleKeyDown,\n    onKeyUp: setShiftState,\n    onMouseDown: onMouseDownHandler,\n    onMouseUp: setShiftState,\n    onClick: handleClick,\n    htmlFor: controlId,\n    className: clsx(styles.label, styles.root, verticalAlign === 'top' && styles['label-top']),\n    \"aria-label\": ariaLabel,\n    title: ariaLabel\n  }, rowIndex !== undefined && !sharedProps.disabled ? getAnalyticsMetadataAttribute({\n    detail: {\n      position: `${rowIndex + 1}`,\n      item: itemKey || ''\n    }\n  }) : {}), selector), React.createElement(\"span\", {\n    className: styles.stud,\n    \"aria-hidden\": true\n  }, \"\\u00A0\"));\n}","map":{"version":3,"names":["React","useContext","clsx","getAnalyticsMetadataAttribute","InternalCheckbox","SingleTabStopNavigationContext","useUniqueId","KeyCode","RadioButton","styles","SelectionControl","_a","selectionType","indeterminate","onShiftToggle","onFocusUp","onFocusDown","name","ariaLabel","focusedComponent","rowIndex","itemKey","verticalAlign","sharedProps","__rest","controlId","isMultiSelection","navigationActive","setShiftState","event","shiftKey","onMouseDownHandler","preventDefault","handleKeyDown","keyCode","up","down","handleClick","target","currentTarget","nativeInput","tagName","querySelector","focus","selector","createElement","Object","assign","showOutline","value","label","Fragment","onKeyDown","onKeyUp","onMouseDown","onMouseUp","onClick","htmlFor","className","root","title","undefined","disabled","detail","position","item","stud"],"sources":["/Users/theo/Library/CloudStorage/OneDrive-RackspaceInc/Documents/aws_hackathon/react-client/node_modules/src/table/selection/selection-control.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { KeyboardEvent, KeyboardEventHandler, MouseEvent, useContext } from 'react';\nimport clsx from 'clsx';\n\nimport { getAnalyticsMetadataAttribute } from '@cloudscape-design/component-toolkit/internal/analytics-metadata';\n\nimport InternalCheckbox from '../../checkbox/internal';\nimport { SingleTabStopNavigationContext } from '../../internal/context/single-tab-stop-navigation-context';\nimport { useUniqueId } from '../../internal/hooks/use-unique-id';\nimport { KeyCode } from '../../internal/keycode';\nimport RadioButton from '../../radio-group/radio-button';\nimport { SelectionProps } from './interfaces';\n\nimport styles from './styles.css.js';\n\nexport interface SelectionControlProps extends SelectionProps {\n  onShiftToggle?(shiftPressed: boolean): void;\n  onFocusUp?: KeyboardEventHandler;\n  onFocusDown?: KeyboardEventHandler;\n  ariaLabel?: string;\n  tabIndex?: -1;\n  focusedComponent?: null | string;\n  rowIndex?: number;\n  itemKey?: string;\n  verticalAlign?: 'middle' | 'top';\n}\n\nexport function SelectionControl({\n  selectionType,\n  indeterminate = false,\n  onShiftToggle,\n  onFocusUp,\n  onFocusDown,\n  name,\n  ariaLabel,\n  focusedComponent,\n  rowIndex,\n  itemKey,\n  verticalAlign = 'middle',\n  ...sharedProps\n}: SelectionControlProps) {\n  const controlId = useUniqueId();\n  const isMultiSelection = selectionType === 'multi';\n  const { navigationActive } = useContext(SingleTabStopNavigationContext);\n\n  const setShiftState = (event: KeyboardEvent | MouseEvent) => {\n    if (isMultiSelection) {\n      onShiftToggle?.(event.shiftKey);\n    }\n  };\n\n  const onMouseDownHandler = (event: MouseEvent) => {\n    setShiftState(event);\n    if (isMultiSelection) {\n      // To overcome an issue\n      // If you shift+click or ctrl+click on a label for a checkbox, checkbox is not checked.\n      // https://bugzilla.mozilla.org/show_bug.cgi?id=559506\n      event.preventDefault();\n    }\n  };\n\n  // native checkboxes do not have focus move via keyboard, we implement it here programmatically\n  const handleKeyDown = (event: KeyboardEvent) => {\n    setShiftState(event);\n    if (isMultiSelection && !navigationActive) {\n      if (event.keyCode === KeyCode.up) {\n        event.preventDefault();\n        onFocusUp?.(event);\n      }\n      if (event.keyCode === KeyCode.down) {\n        event.preventDefault();\n        onFocusDown?.(event);\n      }\n    }\n  };\n\n  const handleClick = (event: MouseEvent) => {\n    const target = event.currentTarget;\n    const nativeInput = (target.tagName === 'INPUT' ? target : target.querySelector('input')) as HTMLInputElement;\n    // Clicking on input, does not focus it on Firefox (AWSUI-11345)\n    nativeInput?.focus();\n  };\n\n  const selector = isMultiSelection ? (\n    <InternalCheckbox\n      {...sharedProps}\n      showOutline={focusedComponent === 'selection-control'}\n      controlId={controlId}\n      data-focus-id=\"selection-control\"\n      indeterminate={indeterminate}\n    />\n  ) : (\n    <RadioButton {...sharedProps} controlId={controlId} name={name} value={''} label={''} />\n  );\n\n  return (\n    <>\n      <label\n        onKeyDown={handleKeyDown}\n        onKeyUp={setShiftState}\n        onMouseDown={onMouseDownHandler}\n        onMouseUp={setShiftState}\n        onClick={handleClick}\n        htmlFor={controlId}\n        className={clsx(styles.label, styles.root, verticalAlign === 'top' && styles['label-top'])}\n        aria-label={ariaLabel}\n        title={ariaLabel}\n        {...(rowIndex !== undefined && !sharedProps.disabled\n          ? getAnalyticsMetadataAttribute({\n              detail: {\n                position: `${rowIndex + 1}`,\n                item: itemKey || '',\n              },\n            })\n          : {})}\n      >\n        {selector}\n      </label>\n      <span className={styles.stud} aria-hidden={true}>\n        &nbsp;\n      </span>\n    </>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
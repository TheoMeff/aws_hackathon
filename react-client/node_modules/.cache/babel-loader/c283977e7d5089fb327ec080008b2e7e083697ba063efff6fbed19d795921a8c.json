{"ast":null,"code":"import { __rest } from \"tslib\";\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useEffect } from 'react';\nimport { getAnalyticsMetadataAttribute } from '@cloudscape-design/component-toolkit/internal/analytics-metadata';\nimport { FunnelMetrics } from '../internal/analytics';\nimport { useFunnel, useFunnelStep, useFunnelSubStep } from '../internal/analytics/hooks/use-funnel';\nimport { getSubStepAllSelector, getTextFromSelector } from '../internal/analytics/selectors';\nimport { getAnalyticsMetadataProps } from '../internal/base-component';\nimport useBaseComponent from '../internal/hooks/use-base-component';\nimport { useUniqueId } from '../internal/hooks/use-unique-id';\nimport { applyDisplayName } from '../internal/utils/apply-display-name';\nimport InternalAlert from './internal';\nimport analyticsSelectors from './analytics-metadata/styles.css.js';\nconst Alert = React.forwardRef((_a, ref) => {\n  var {\n      type = 'info',\n      visible = true\n    } = _a,\n    props = __rest(_a, [\"type\", \"visible\"]);\n  const analyticsMetadata = getAnalyticsMetadataProps(props);\n  const baseComponentProps = useBaseComponent('Alert', {\n    props: {\n      type,\n      visible,\n      dismissible: props.dismissible\n    }\n  }, analyticsMetadata);\n  const {\n    funnelIdentifier,\n    funnelInteractionId,\n    funnelErrorContext,\n    submissionAttempt,\n    funnelState,\n    errorCount\n  } = useFunnel();\n  const {\n    stepNumber,\n    stepNameSelector,\n    stepIdentifier,\n    subStepCount,\n    stepErrorContext,\n    subStepConfiguration\n  } = useFunnelStep();\n  const {\n    subStepSelector,\n    subStepNameSelector,\n    subStepIdentifier,\n    subStepErrorContext\n  } = useFunnelSubStep();\n  const messageSlotId = useUniqueId('alert-');\n  useEffect(() => {\n    var _a, _b, _c, _d, _e;\n    if (funnelInteractionId && visible && type === 'error' && funnelState.current !== 'complete') {\n      const stepName = getTextFromSelector(stepNameSelector);\n      const subStepName = getTextFromSelector(subStepNameSelector);\n      errorCount.current++;\n      // We don't want to report an error if it is hidden, e.g. inside an Expandable Section.\n      const errorIsVisible = ((_c = (_b = (_a = baseComponentProps.__internalRootRef.current) === null || _a === void 0 ? void 0 : _a.getBoundingClientRect()) === null || _b === void 0 ? void 0 : _b.width) !== null && _c !== void 0 ? _c : 0) > 0;\n      if (errorIsVisible) {\n        if (subStepSelector) {\n          FunnelMetrics.funnelSubStepError({\n            funnelInteractionId,\n            funnelIdentifier,\n            stepIdentifier,\n            subStepSelector,\n            subStepName,\n            subStepNameSelector,\n            stepNumber,\n            stepName,\n            stepNameSelector,\n            subStepAllSelector: getSubStepAllSelector(),\n            subStepIdentifier,\n            errorContext: analyticsMetadata.errorContext || subStepErrorContext\n          });\n        } else if (stepNameSelector) {\n          FunnelMetrics.funnelStepError({\n            funnelInteractionId,\n            stepNumber,\n            stepNameSelector,\n            stepName,\n            stepIdentifier,\n            currentDocument: (_d = baseComponentProps.__internalRootRef.current) === null || _d === void 0 ? void 0 : _d.ownerDocument,\n            totalSubSteps: subStepCount.current,\n            funnelIdentifier,\n            subStepAllSelector: getSubStepAllSelector(),\n            errorContext: analyticsMetadata.errorContext || stepErrorContext,\n            subStepConfiguration: (_e = subStepConfiguration.current) === null || _e === void 0 ? void 0 : _e.get(stepNumber),\n            stepErrorSelector: '#' + messageSlotId\n          });\n        } else {\n          FunnelMetrics.funnelError({\n            funnelIdentifier,\n            funnelInteractionId,\n            errorContext: analyticsMetadata.errorContext || funnelErrorContext\n          });\n        }\n      }\n      return () => {\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        errorCount.current--;\n      };\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [funnelInteractionId, visible, submissionAttempt, errorCount]);\n  const componentAnalyticsMetadata = {\n    name: 'awsui.Alert',\n    label: `.${analyticsSelectors.header}`,\n    properties: {\n      type\n    }\n  };\n  return React.createElement(InternalAlert, Object.assign({\n    type: type,\n    visible: visible\n  }, props, baseComponentProps, {\n    ref: ref,\n    messageSlotId: messageSlotId\n  }, getAnalyticsMetadataAttribute({\n    component: componentAnalyticsMetadata\n  })));\n});\napplyDisplayName(Alert, 'Alert');\nexport default Alert;","map":{"version":3,"names":["React","useEffect","getAnalyticsMetadataAttribute","FunnelMetrics","useFunnel","useFunnelStep","useFunnelSubStep","getSubStepAllSelector","getTextFromSelector","getAnalyticsMetadataProps","useBaseComponent","useUniqueId","applyDisplayName","InternalAlert","analyticsSelectors","Alert","forwardRef","_a","ref","type","visible","props","__rest","analyticsMetadata","baseComponentProps","dismissible","funnelIdentifier","funnelInteractionId","funnelErrorContext","submissionAttempt","funnelState","errorCount","stepNumber","stepNameSelector","stepIdentifier","subStepCount","stepErrorContext","subStepConfiguration","subStepSelector","subStepNameSelector","subStepIdentifier","subStepErrorContext","messageSlotId","current","stepName","subStepName","errorIsVisible","_c","_b","__internalRootRef","getBoundingClientRect","width","funnelSubStepError","subStepAllSelector","errorContext","funnelStepError","currentDocument","_d","ownerDocument","totalSubSteps","_e","get","stepErrorSelector","funnelError","componentAnalyticsMetadata","name","label","header","properties","createElement","Object","assign","component"],"sources":["/Users/theo/Library/CloudStorage/OneDrive-RackspaceInc/Documents/aws_hackathon/react-client/node_modules/src/alert/index.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useEffect } from 'react';\n\nimport { getAnalyticsMetadataAttribute } from '@cloudscape-design/component-toolkit/internal/analytics-metadata';\n\nimport { FunnelMetrics } from '../internal/analytics';\nimport { useFunnel, useFunnelStep, useFunnelSubStep } from '../internal/analytics/hooks/use-funnel';\nimport { getSubStepAllSelector, getTextFromSelector } from '../internal/analytics/selectors';\nimport { BasePropsWithAnalyticsMetadata, getAnalyticsMetadataProps } from '../internal/base-component';\nimport useBaseComponent from '../internal/hooks/use-base-component';\nimport { useUniqueId } from '../internal/hooks/use-unique-id';\nimport { applyDisplayName } from '../internal/utils/apply-display-name';\nimport { GeneratedAnalyticsMetadataAlertComponent } from './analytics-metadata/interfaces';\nimport { AlertProps } from './interfaces';\nimport InternalAlert from './internal';\n\nimport analyticsSelectors from './analytics-metadata/styles.css.js';\n\nexport { AlertProps };\n\nconst Alert = React.forwardRef(\n  ({ type = 'info', visible = true, ...props }: AlertProps, ref: React.Ref<AlertProps.Ref>) => {\n    const analyticsMetadata = getAnalyticsMetadataProps(props as BasePropsWithAnalyticsMetadata);\n    const baseComponentProps = useBaseComponent<HTMLDivElement>(\n      'Alert',\n      {\n        props: { type, visible, dismissible: props.dismissible },\n      },\n      analyticsMetadata\n    );\n\n    const { funnelIdentifier, funnelInteractionId, funnelErrorContext, submissionAttempt, funnelState, errorCount } =\n      useFunnel();\n    const { stepNumber, stepNameSelector, stepIdentifier, subStepCount, stepErrorContext, subStepConfiguration } =\n      useFunnelStep();\n    const { subStepSelector, subStepNameSelector, subStepIdentifier, subStepErrorContext } = useFunnelSubStep();\n\n    const messageSlotId = useUniqueId('alert-');\n\n    useEffect(() => {\n      if (funnelInteractionId && visible && type === 'error' && funnelState.current !== 'complete') {\n        const stepName = getTextFromSelector(stepNameSelector);\n        const subStepName = getTextFromSelector(subStepNameSelector);\n\n        errorCount.current++;\n\n        // We don't want to report an error if it is hidden, e.g. inside an Expandable Section.\n        const errorIsVisible = (baseComponentProps.__internalRootRef.current?.getBoundingClientRect()?.width ?? 0) > 0;\n\n        if (errorIsVisible) {\n          if (subStepSelector) {\n            FunnelMetrics.funnelSubStepError({\n              funnelInteractionId,\n              funnelIdentifier,\n              stepIdentifier,\n              subStepSelector,\n              subStepName,\n              subStepNameSelector,\n              stepNumber,\n              stepName,\n              stepNameSelector,\n              subStepAllSelector: getSubStepAllSelector(),\n              subStepIdentifier,\n              errorContext: analyticsMetadata.errorContext || subStepErrorContext,\n            });\n          } else if (stepNameSelector) {\n            FunnelMetrics.funnelStepError({\n              funnelInteractionId,\n              stepNumber,\n              stepNameSelector,\n              stepName,\n              stepIdentifier,\n              currentDocument: baseComponentProps.__internalRootRef.current?.ownerDocument,\n              totalSubSteps: subStepCount.current,\n              funnelIdentifier,\n              subStepAllSelector: getSubStepAllSelector(),\n              errorContext: analyticsMetadata.errorContext || stepErrorContext,\n              subStepConfiguration: subStepConfiguration.current?.get(stepNumber),\n              stepErrorSelector: '#' + messageSlotId,\n            });\n          } else {\n            FunnelMetrics.funnelError({\n              funnelIdentifier,\n              funnelInteractionId,\n              errorContext: analyticsMetadata.errorContext || funnelErrorContext,\n            });\n          }\n        }\n\n        return () => {\n          // eslint-disable-next-line react-hooks/exhaustive-deps\n          errorCount.current--;\n        };\n      }\n\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [funnelInteractionId, visible, submissionAttempt, errorCount]);\n\n    const componentAnalyticsMetadata: GeneratedAnalyticsMetadataAlertComponent = {\n      name: 'awsui.Alert',\n      label: `.${analyticsSelectors.header}`,\n      properties: {\n        type,\n      },\n    };\n\n    return (\n      <InternalAlert\n        type={type}\n        visible={visible}\n        {...props}\n        {...baseComponentProps}\n        ref={ref}\n        messageSlotId={messageSlotId}\n        {...getAnalyticsMetadataAttribute({ component: componentAnalyticsMetadata })}\n      />\n    );\n  }\n);\n\napplyDisplayName(Alert, 'Alert');\nexport default Alert;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
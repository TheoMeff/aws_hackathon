{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React from 'react';\nimport clsx from 'clsx';\nimport { AnchorItem } from './anchor-item';\nimport styles from './styles.css.js';\nimport testUtilsStyles from './test-classes/styles.css.js';\nconst collectChildItems = (items, currentIndex, currentLevel) => {\n  const childItems = [];\n  let nextIndex = currentIndex + 1;\n  while (nextIndex < items.length && items[nextIndex].level > currentLevel) {\n    childItems.push(items[nextIndex]);\n    nextIndex++;\n  }\n  return childItems;\n};\nconst createAnchorItem = (currentItem, index, childItems, renderQueue, context) => {\n  const childList = [];\n  const hasChildren = childItems.length > 0;\n  const olClassNAme = clsx(styles['anchor-list'], testUtilsStyles['anchor-list']);\n  if (hasChildren) {\n    renderQueue.push({\n      items: childItems,\n      parentList: childList,\n      startIndex: index + 1\n    });\n  }\n  return React.createElement(AnchorItem, {\n    onFollow: context.onFollowHandler,\n    isActive: currentItem.href === context.currentActiveHref,\n    key: index,\n    index: index,\n    anchor: currentItem\n  }, hasChildren && React.createElement(\"ol\", {\n    className: olClassNAme\n  }, childList));\n};\nconst processQueueItem = (items, startIndex, parentList, renderQueue, context) => {\n  let currentIndex = 0;\n  while (currentIndex < items.length) {\n    const currentItem = items[currentIndex];\n    const childItems = collectChildItems(items, currentIndex, currentItem.level);\n    parentList.push(createAnchorItem(currentItem, startIndex + currentIndex, childItems, renderQueue, context));\n    currentIndex += childItems.length + 1;\n  }\n};\n// Perform a queue-based breadth-first traversal that groups child items under their parents based on level hierarchy.\nexport const renderNestedAnchors = (items, context) => {\n  const rootList = [];\n  const renderQueue = [];\n  renderQueue.push({\n    items,\n    parentList: rootList,\n    startIndex: 0\n  });\n  while (renderQueue.length > 0) {\n    const currentItem = renderQueue.shift();\n    processQueueItem(currentItem.items, currentItem.startIndex, currentItem.parentList, renderQueue, context);\n  }\n  return rootList;\n};","map":{"version":3,"names":["React","clsx","AnchorItem","styles","testUtilsStyles","collectChildItems","items","currentIndex","currentLevel","childItems","nextIndex","length","level","push","createAnchorItem","currentItem","index","renderQueue","context","childList","hasChildren","olClassNAme","parentList","startIndex","createElement","onFollow","onFollowHandler","isActive","href","currentActiveHref","key","anchor","className","processQueueItem","renderNestedAnchors","rootList","shift"],"sources":["/Users/theo/Library/CloudStorage/OneDrive-RackspaceInc/Documents/aws_hackathon/react-client/node_modules/src/anchor-navigation/utils.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React from 'react';\nimport clsx from 'clsx';\n\nimport { AnchorItem } from './anchor-item';\nimport { AnchorNavigationProps } from './interfaces';\n\nimport styles from './styles.css.js';\nimport testUtilsStyles from './test-classes/styles.css.js';\n\ninterface AnchorRenderQueueItem {\n  items: AnchorNavigationProps.Anchor[];\n  parentList: React.ReactNode[];\n  startIndex: number;\n}\n\nconst collectChildItems = (\n  items: AnchorNavigationProps.Anchor[],\n  currentIndex: number,\n  currentLevel: number\n): AnchorNavigationProps.Anchor[] => {\n  const childItems: AnchorNavigationProps.Anchor[] = [];\n  let nextIndex = currentIndex + 1;\n\n  while (nextIndex < items.length && items[nextIndex].level > currentLevel) {\n    childItems.push(items[nextIndex]);\n    nextIndex++;\n  }\n\n  return childItems;\n};\n\ninterface RenderContext {\n  onFollowHandler: (anchor: AnchorNavigationProps.Anchor, sourceEvent: React.SyntheticEvent | Event) => void;\n  currentActiveHref: string | undefined;\n}\n\nconst createAnchorItem = (\n  currentItem: AnchorNavigationProps.Anchor,\n  index: number,\n  childItems: AnchorNavigationProps.Anchor[],\n  renderQueue: AnchorRenderQueueItem[],\n  context: RenderContext\n) => {\n  const childList: React.ReactNode[] = [];\n  const hasChildren = childItems.length > 0;\n  const olClassNAme = clsx(styles['anchor-list'], testUtilsStyles['anchor-list']);\n\n  if (hasChildren) {\n    renderQueue.push({\n      items: childItems,\n      parentList: childList,\n      startIndex: index + 1,\n    });\n  }\n\n  return (\n    <AnchorItem\n      onFollow={context.onFollowHandler}\n      isActive={currentItem.href === context.currentActiveHref}\n      key={index}\n      index={index}\n      anchor={currentItem}\n    >\n      {hasChildren && <ol className={olClassNAme}>{childList}</ol>}\n    </AnchorItem>\n  );\n};\n\nconst processQueueItem = (\n  items: AnchorNavigationProps.Anchor[],\n  startIndex: number,\n  parentList: React.ReactNode[],\n  renderQueue: AnchorRenderQueueItem[],\n  context: RenderContext\n) => {\n  let currentIndex = 0;\n  while (currentIndex < items.length) {\n    const currentItem = items[currentIndex];\n    const childItems = collectChildItems(items, currentIndex, currentItem.level);\n\n    parentList.push(createAnchorItem(currentItem, startIndex + currentIndex, childItems, renderQueue, context));\n    currentIndex += childItems.length + 1;\n  }\n};\n\n// Perform a queue-based breadth-first traversal that groups child items under their parents based on level hierarchy.\nexport const renderNestedAnchors = (items: AnchorNavigationProps.Anchor[], context: RenderContext): React.ReactNode => {\n  const rootList: React.ReactNode[] = [];\n  const renderQueue: AnchorRenderQueueItem[] = [];\n\n  renderQueue.push({ items, parentList: rootList, startIndex: 0 });\n\n  while (renderQueue.length > 0) {\n    const currentItem = renderQueue.shift()!;\n    processQueueItem(currentItem.items, currentItem.startIndex, currentItem.parentList, renderQueue, context);\n  }\n\n  return rootList;\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { useRef } from 'react';\nexport default function useLiveAnnouncements({\n  items,\n  itemDefinition,\n  isDragging,\n  liveAnnouncementDndStarted,\n  liveAnnouncementDndItemReordered,\n  liveAnnouncementDndItemCommitted,\n  liveAnnouncementDndDiscarded\n}) {\n  const isFirstAnnouncement = useRef(true);\n  if (!isDragging) {\n    isFirstAnnouncement.current = true;\n  }\n  return {\n    onDragStart({\n      active\n    }) {\n      if (active && liveAnnouncementDndStarted) {\n        const index = items.findIndex(item => itemDefinition.id(item) === active.id);\n        return liveAnnouncementDndStarted(index + 1, items.length);\n      }\n    },\n    onDragOver({\n      active,\n      over\n    }) {\n      if (liveAnnouncementDndItemReordered) {\n        // Don't announce on the first dragOver because it's redundant with onDragStart.\n        if (isFirstAnnouncement.current) {\n          isFirstAnnouncement.current = false;\n          if (!over || over.id === active.id) {\n            return;\n          }\n        }\n        const initialIndex = items.findIndex(item => itemDefinition.id(item) === active.id);\n        const currentIdex = over ? items.findIndex(item => itemDefinition.id(item) === over.id) : initialIndex;\n        return liveAnnouncementDndItemReordered(initialIndex + 1, currentIdex + 1, items.length);\n      }\n    },\n    onDragEnd({\n      active,\n      over\n    }) {\n      if (liveAnnouncementDndItemCommitted) {\n        const initialIndex = items.findIndex(item => itemDefinition.id(item) === active.id);\n        const finalIndex = over ? items.findIndex(item => itemDefinition.id(item) === over.id) : initialIndex;\n        return liveAnnouncementDndItemCommitted(initialIndex + 1, finalIndex + 1, items.length);\n      }\n    },\n    onDragCancel() {\n      return liveAnnouncementDndDiscarded;\n    }\n  };\n}","map":{"version":3,"names":["useRef","useLiveAnnouncements","items","itemDefinition","isDragging","liveAnnouncementDndStarted","liveAnnouncementDndItemReordered","liveAnnouncementDndItemCommitted","liveAnnouncementDndDiscarded","isFirstAnnouncement","current","onDragStart","active","index","findIndex","item","id","length","onDragOver","over","initialIndex","currentIdex","onDragEnd","finalIndex","onDragCancel"],"sources":["/Users/theo/Library/CloudStorage/OneDrive-RackspaceInc/Documents/aws_hackathon/react-client/node_modules/src/internal/components/sortable-area/use-live-announcements.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { useRef } from 'react';\nimport { DragEndEvent, DragOverEvent, DragStartEvent } from '@dnd-kit/core';\n\nimport { SortableAreaProps } from './interfaces';\n\nexport default function useLiveAnnouncements<Item>({\n  items,\n  itemDefinition,\n  isDragging,\n  liveAnnouncementDndStarted,\n  liveAnnouncementDndItemReordered,\n  liveAnnouncementDndItemCommitted,\n  liveAnnouncementDndDiscarded,\n}: {\n  items: readonly Item[];\n  itemDefinition: SortableAreaProps.ItemDefinition<Item>;\n  isDragging: boolean;\n} & SortableAreaProps.DndAreaI18nStrings) {\n  const isFirstAnnouncement = useRef(true);\n  if (!isDragging) {\n    isFirstAnnouncement.current = true;\n  }\n\n  return {\n    onDragStart({ active }: DragStartEvent) {\n      if (active && liveAnnouncementDndStarted) {\n        const index = items.findIndex(item => itemDefinition.id(item) === active.id);\n        return liveAnnouncementDndStarted(index + 1, items.length);\n      }\n    },\n    onDragOver({ active, over }: DragOverEvent) {\n      if (liveAnnouncementDndItemReordered) {\n        // Don't announce on the first dragOver because it's redundant with onDragStart.\n        if (isFirstAnnouncement.current) {\n          isFirstAnnouncement.current = false;\n          if (!over || over.id === active.id) {\n            return;\n          }\n        }\n        const initialIndex = items.findIndex(item => itemDefinition.id(item) === active.id);\n        const currentIdex = over ? items.findIndex(item => itemDefinition.id(item) === over.id) : initialIndex;\n        return liveAnnouncementDndItemReordered(initialIndex + 1, currentIdex + 1, items.length);\n      }\n    },\n    onDragEnd({ active, over }: DragEndEvent) {\n      if (liveAnnouncementDndItemCommitted) {\n        const initialIndex = items.findIndex(item => itemDefinition.id(item) === active.id);\n        const finalIndex = over ? items.findIndex(item => itemDefinition.id(item) === over.id) : initialIndex;\n        return liveAnnouncementDndItemCommitted(initialIndex + 1, finalIndex + 1, items.length);\n      }\n    },\n    onDragCancel() {\n      return liveAnnouncementDndDiscarded;\n    },\n  };\n}\n"],"mappings":"AAAA;AACA;AAEA,SAASA,MAAM,QAAQ,OAAO;AAK9B,eAAc,SAAUC,oBAAoBA,CAAO;EACjDC,KAAK;EACLC,cAAc;EACdC,UAAU;EACVC,0BAA0B;EAC1BC,gCAAgC;EAChCC,gCAAgC;EAChCC;AAA4B,CAKU;EACtC,MAAMC,mBAAmB,GAAGT,MAAM,CAAC,IAAI,CAAC;EACxC,IAAI,CAACI,UAAU,EAAE;IACfK,mBAAmB,CAACC,OAAO,GAAG,IAAI;;EAGpC,OAAO;IACLC,WAAWA,CAAC;MAAEC;IAAM,CAAkB;MACpC,IAAIA,MAAM,IAAIP,0BAA0B,EAAE;QACxC,MAAMQ,KAAK,GAAGX,KAAK,CAACY,SAAS,CAACC,IAAI,IAAIZ,cAAc,CAACa,EAAE,CAACD,IAAI,CAAC,KAAKH,MAAM,CAACI,EAAE,CAAC;QAC5E,OAAOX,0BAA0B,CAACQ,KAAK,GAAG,CAAC,EAAEX,KAAK,CAACe,MAAM,CAAC;;IAE9D,CAAC;IACDC,UAAUA,CAAC;MAAEN,MAAM;MAAEO;IAAI,CAAiB;MACxC,IAAIb,gCAAgC,EAAE;QACpC;QACA,IAAIG,mBAAmB,CAACC,OAAO,EAAE;UAC/BD,mBAAmB,CAACC,OAAO,GAAG,KAAK;UACnC,IAAI,CAACS,IAAI,IAAIA,IAAI,CAACH,EAAE,KAAKJ,MAAM,CAACI,EAAE,EAAE;YAClC;;;QAGJ,MAAMI,YAAY,GAAGlB,KAAK,CAACY,SAAS,CAACC,IAAI,IAAIZ,cAAc,CAACa,EAAE,CAACD,IAAI,CAAC,KAAKH,MAAM,CAACI,EAAE,CAAC;QACnF,MAAMK,WAAW,GAAGF,IAAI,GAAGjB,KAAK,CAACY,SAAS,CAACC,IAAI,IAAIZ,cAAc,CAACa,EAAE,CAACD,IAAI,CAAC,KAAKI,IAAI,CAACH,EAAE,CAAC,GAAGI,YAAY;QACtG,OAAOd,gCAAgC,CAACc,YAAY,GAAG,CAAC,EAAEC,WAAW,GAAG,CAAC,EAAEnB,KAAK,CAACe,MAAM,CAAC;;IAE5F,CAAC;IACDK,SAASA,CAAC;MAAEV,MAAM;MAAEO;IAAI,CAAgB;MACtC,IAAIZ,gCAAgC,EAAE;QACpC,MAAMa,YAAY,GAAGlB,KAAK,CAACY,SAAS,CAACC,IAAI,IAAIZ,cAAc,CAACa,EAAE,CAACD,IAAI,CAAC,KAAKH,MAAM,CAACI,EAAE,CAAC;QACnF,MAAMO,UAAU,GAAGJ,IAAI,GAAGjB,KAAK,CAACY,SAAS,CAACC,IAAI,IAAIZ,cAAc,CAACa,EAAE,CAACD,IAAI,CAAC,KAAKI,IAAI,CAACH,EAAE,CAAC,GAAGI,YAAY;QACrG,OAAOb,gCAAgC,CAACa,YAAY,GAAG,CAAC,EAAEG,UAAU,GAAG,CAAC,EAAErB,KAAK,CAACe,MAAM,CAAC;;IAE3F,CAAC;IACDO,YAAYA,CAAA;MACV,OAAOhB,4BAA4B;IACrC;GACD;AACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
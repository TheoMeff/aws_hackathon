{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { useEffect, useRef, useState } from 'react';\nimport { useUniqueId } from '../../hooks/use-unique-id';\nimport { reportRuntimeApiWarning } from './metrics';\nexport function createUseDiscoveredContent(componentName, controller) {\n  return function useDiscoveredContent({\n    type,\n    header,\n    children\n  }) {\n    const instanceId = useUniqueId(`${componentName}-discovered-content`);\n    const headerRef = useRef(null);\n    const contentRef = useRef(null);\n    const replacementHeaderRef = useRef(null);\n    const replacementContentRef = useRef(null);\n    const [initialHidden, setInitialHidden] = useState(() => controller.initialCheck({\n      instanceId,\n      type,\n      header,\n      content: children\n    }));\n    const [headerReplacementType, setFoundHeaderReplacement] = useState('original');\n    const [contentReplacementType, setFoundContentReplacement] = useState('original');\n    const mountedProvider = useRef();\n    useEffect(() => {\n      const context = {\n        instanceId,\n        type,\n        headerRef,\n        contentRef\n      };\n      setInitialHidden(false);\n      return controller.onContentRegistered(provider => {\n        let mounted = true;\n        function checkMounted(methodName) {\n          if (!mounted) {\n            reportRuntimeApiWarning(`${componentName}-content-replacer`, `\"${methodName}\" called after component unmounted`);\n            return false;\n          }\n          return true;\n        }\n        mountedProvider.current = provider.runReplacer(context, {\n          hideHeader() {\n            if (checkMounted('hideHeader')) {\n              setFoundHeaderReplacement('remove');\n            }\n          },\n          restoreHeader() {\n            if (checkMounted('restoreHeader')) {\n              setFoundHeaderReplacement('original');\n            }\n          },\n          replaceHeader(replacer) {\n            if (checkMounted('replaceHeader')) {\n              replacer(replacementHeaderRef.current);\n              setFoundHeaderReplacement('replaced');\n            }\n          },\n          hideContent() {\n            if (checkMounted('hideContent')) {\n              setFoundContentReplacement('remove');\n            }\n          },\n          restoreContent() {\n            if (checkMounted('restoreContent')) {\n              setFoundContentReplacement('original');\n            }\n          },\n          replaceContent(replacer) {\n            if (checkMounted('replaceContent')) {\n              replacer(replacementContentRef.current);\n              setFoundContentReplacement('replaced');\n            }\n          }\n        });\n        return () => {\n          var _a;\n          (_a = mountedProvider.current) === null || _a === void 0 ? void 0 : _a.unmount({\n            replacementHeaderContainer: replacementHeaderRef.current,\n            replacementContentContainer: replacementContentRef.current\n          });\n          mounted = false;\n        };\n      });\n    }, [instanceId, type]);\n    useEffect(() => {\n      var _a;\n      (_a = mountedProvider.current) === null || _a === void 0 ? void 0 : _a.update();\n    }, [type, header, children]);\n    return {\n      initialHidden,\n      headerReplacementType,\n      contentReplacementType,\n      headerRef: headerRef,\n      replacementHeaderRef: replacementHeaderRef,\n      contentRef: contentRef,\n      replacementContentRef: replacementContentRef\n    };\n  };\n}","map":{"version":3,"names":["useEffect","useRef","useState","useUniqueId","reportRuntimeApiWarning","createUseDiscoveredContent","componentName","controller","useDiscoveredContent","type","header","children","instanceId","headerRef","contentRef","replacementHeaderRef","replacementContentRef","initialHidden","setInitialHidden","initialCheck","content","headerReplacementType","setFoundHeaderReplacement","contentReplacementType","setFoundContentReplacement","mountedProvider","context","onContentRegistered","provider","mounted","checkMounted","methodName","current","runReplacer","hideHeader","restoreHeader","replaceHeader","replacer","hideContent","restoreContent","replaceContent","_a","unmount","replacementHeaderContainer","replacementContentContainer","update"],"sources":["/Users/theo/Library/CloudStorage/OneDrive-RackspaceInc/Documents/aws_hackathon/react-client/node_modules/src/internal/plugins/helpers/use-discovered-content.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useEffect, useRef, useState } from 'react';\n\nimport { useUniqueId } from '../../hooks/use-unique-id';\nimport {\n  AlertFlashContentApiInternal,\n  AlertFlashContentResult,\n  ReplacementType,\n} from '../controllers/alert-flash-content';\nimport { reportRuntimeApiWarning } from './metrics';\n\nexport function createUseDiscoveredContent(componentName: string, controller: AlertFlashContentApiInternal) {\n  return function useDiscoveredContent({\n    type,\n    header,\n    children,\n  }: {\n    type: string;\n    header: React.ReactNode;\n    children: React.ReactNode;\n  }) {\n    const instanceId = useUniqueId(`${componentName}-discovered-content`);\n    const headerRef = useRef<HTMLDivElement>(null);\n    const contentRef = useRef<HTMLDivElement>(null);\n    const replacementHeaderRef = useRef<HTMLDivElement>(null);\n    const replacementContentRef = useRef<HTMLDivElement>(null);\n    const [initialHidden, setInitialHidden] = useState(() =>\n      controller.initialCheck({\n        instanceId,\n        type,\n        header,\n        content: children,\n      })\n    );\n    const [headerReplacementType, setFoundHeaderReplacement] = useState<ReplacementType>('original');\n    const [contentReplacementType, setFoundContentReplacement] = useState<ReplacementType>('original');\n    const mountedProvider = useRef<AlertFlashContentResult | undefined>();\n\n    useEffect(() => {\n      const context = { instanceId, type, headerRef, contentRef };\n\n      setInitialHidden(false);\n\n      return controller.onContentRegistered(provider => {\n        let mounted = true;\n\n        function checkMounted(methodName: string) {\n          if (!mounted) {\n            reportRuntimeApiWarning(\n              `${componentName}-content-replacer`,\n              `\"${methodName}\" called after component unmounted`\n            );\n            return false;\n          }\n          return true;\n        }\n\n        mountedProvider.current = provider.runReplacer(context, {\n          hideHeader() {\n            if (checkMounted('hideHeader')) {\n              setFoundHeaderReplacement('remove');\n            }\n          },\n          restoreHeader() {\n            if (checkMounted('restoreHeader')) {\n              setFoundHeaderReplacement('original');\n            }\n          },\n          replaceHeader(replacer: (container: HTMLElement) => void) {\n            if (checkMounted('replaceHeader')) {\n              replacer(replacementHeaderRef.current!);\n              setFoundHeaderReplacement('replaced');\n            }\n          },\n          hideContent() {\n            if (checkMounted('hideContent')) {\n              setFoundContentReplacement('remove');\n            }\n          },\n          restoreContent() {\n            if (checkMounted('restoreContent')) {\n              setFoundContentReplacement('original');\n            }\n          },\n          replaceContent(replacer: (container: HTMLElement) => void) {\n            if (checkMounted('replaceContent')) {\n              replacer(replacementContentRef.current!);\n              setFoundContentReplacement('replaced');\n            }\n          },\n        });\n\n        return () => {\n          mountedProvider.current?.unmount({\n            replacementHeaderContainer: replacementHeaderRef.current!,\n            replacementContentContainer: replacementContentRef.current!,\n          });\n          mounted = false;\n        };\n      });\n    }, [instanceId, type]);\n\n    useEffect(() => {\n      mountedProvider.current?.update();\n    }, [type, header, children]);\n\n    return {\n      initialHidden,\n      headerReplacementType,\n      contentReplacementType,\n      headerRef: headerRef as React.Ref<HTMLDivElement>,\n      replacementHeaderRef: replacementHeaderRef as React.Ref<HTMLDivElement>,\n      contentRef: contentRef as React.Ref<HTMLDivElement>,\n      replacementContentRef: replacementContentRef as React.Ref<HTMLDivElement>,\n    };\n  };\n}\n"],"mappings":"AAAA;AACA;AACA,SAAgBA,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAE1D,SAASC,WAAW,QAAQ,2BAA2B;AAMvD,SAASC,uBAAuB,QAAQ,WAAW;AAEnD,OAAM,SAAUC,0BAA0BA,CAACC,aAAqB,EAAEC,UAAwC;EACxG,OAAO,SAASC,oBAAoBA,CAAC;IACnCC,IAAI;IACJC,MAAM;IACNC;EAAQ,CAKT;IACC,MAAMC,UAAU,GAAGT,WAAW,CAAC,GAAGG,aAAa,qBAAqB,CAAC;IACrE,MAAMO,SAAS,GAAGZ,MAAM,CAAiB,IAAI,CAAC;IAC9C,MAAMa,UAAU,GAAGb,MAAM,CAAiB,IAAI,CAAC;IAC/C,MAAMc,oBAAoB,GAAGd,MAAM,CAAiB,IAAI,CAAC;IACzD,MAAMe,qBAAqB,GAAGf,MAAM,CAAiB,IAAI,CAAC;IAC1D,MAAM,CAACgB,aAAa,EAAEC,gBAAgB,CAAC,GAAGhB,QAAQ,CAAC,MACjDK,UAAU,CAACY,YAAY,CAAC;MACtBP,UAAU;MACVH,IAAI;MACJC,MAAM;MACNU,OAAO,EAAET;KACV,CAAC,CACH;IACD,MAAM,CAACU,qBAAqB,EAAEC,yBAAyB,CAAC,GAAGpB,QAAQ,CAAkB,UAAU,CAAC;IAChG,MAAM,CAACqB,sBAAsB,EAAEC,0BAA0B,CAAC,GAAGtB,QAAQ,CAAkB,UAAU,CAAC;IAClG,MAAMuB,eAAe,GAAGxB,MAAM,EAAuC;IAErED,SAAS,CAAC,MAAK;MACb,MAAM0B,OAAO,GAAG;QAAEd,UAAU;QAAEH,IAAI;QAAEI,SAAS;QAAEC;MAAU,CAAE;MAE3DI,gBAAgB,CAAC,KAAK,CAAC;MAEvB,OAAOX,UAAU,CAACoB,mBAAmB,CAACC,QAAQ,IAAG;QAC/C,IAAIC,OAAO,GAAG,IAAI;QAElB,SAASC,YAAYA,CAACC,UAAkB;UACtC,IAAI,CAACF,OAAO,EAAE;YACZzB,uBAAuB,CACrB,GAAGE,aAAa,mBAAmB,EACnC,IAAIyB,UAAU,oCAAoC,CACnD;YACD,OAAO,KAAK;;UAEd,OAAO,IAAI;QACb;QAEAN,eAAe,CAACO,OAAO,GAAGJ,QAAQ,CAACK,WAAW,CAACP,OAAO,EAAE;UACtDQ,UAAUA,CAAA;YACR,IAAIJ,YAAY,CAAC,YAAY,CAAC,EAAE;cAC9BR,yBAAyB,CAAC,QAAQ,CAAC;;UAEvC,CAAC;UACDa,aAAaA,CAAA;YACX,IAAIL,YAAY,CAAC,eAAe,CAAC,EAAE;cACjCR,yBAAyB,CAAC,UAAU,CAAC;;UAEzC,CAAC;UACDc,aAAaA,CAACC,QAA0C;YACtD,IAAIP,YAAY,CAAC,eAAe,CAAC,EAAE;cACjCO,QAAQ,CAACtB,oBAAoB,CAACiB,OAAQ,CAAC;cACvCV,yBAAyB,CAAC,UAAU,CAAC;;UAEzC,CAAC;UACDgB,WAAWA,CAAA;YACT,IAAIR,YAAY,CAAC,aAAa,CAAC,EAAE;cAC/BN,0BAA0B,CAAC,QAAQ,CAAC;;UAExC,CAAC;UACDe,cAAcA,CAAA;YACZ,IAAIT,YAAY,CAAC,gBAAgB,CAAC,EAAE;cAClCN,0BAA0B,CAAC,UAAU,CAAC;;UAE1C,CAAC;UACDgB,cAAcA,CAACH,QAA0C;YACvD,IAAIP,YAAY,CAAC,gBAAgB,CAAC,EAAE;cAClCO,QAAQ,CAACrB,qBAAqB,CAACgB,OAAQ,CAAC;cACxCR,0BAA0B,CAAC,UAAU,CAAC;;UAE1C;SACD,CAAC;QAEF,OAAO,MAAK;;UACV,CAAAiB,EAAA,GAAAhB,eAAe,CAACO,OAAO,cAAAS,EAAA,uBAAAA,EAAA,CAAEC,OAAO,CAAC;YAC/BC,0BAA0B,EAAE5B,oBAAoB,CAACiB,OAAQ;YACzDY,2BAA2B,EAAE5B,qBAAqB,CAACgB;WACpD,CAAC;UACFH,OAAO,GAAG,KAAK;QACjB,CAAC;MACH,CAAC,CAAC;IACJ,CAAC,EAAE,CAACjB,UAAU,EAAEH,IAAI,CAAC,CAAC;IAEtBT,SAAS,CAAC,MAAK;;MACb,CAAAyC,EAAA,GAAAhB,eAAe,CAACO,OAAO,cAAAS,EAAA,uBAAAA,EAAA,CAAEI,MAAM,EAAE;IACnC,CAAC,EAAE,CAACpC,IAAI,EAAEC,MAAM,EAAEC,QAAQ,CAAC,CAAC;IAE5B,OAAO;MACLM,aAAa;MACbI,qBAAqB;MACrBE,sBAAsB;MACtBV,SAAS,EAAEA,SAAsC;MACjDE,oBAAoB,EAAEA,oBAAiD;MACvED,UAAU,EAAEA,UAAuC;MACnDE,qBAAqB,EAAEA;KACxB;EACH,CAAC;AACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
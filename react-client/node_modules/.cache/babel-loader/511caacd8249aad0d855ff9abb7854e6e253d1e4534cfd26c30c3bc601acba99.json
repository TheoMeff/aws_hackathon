{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useEffect, useRef } from 'react';\nimport { getIsRtl, getLogicalBoundingClientRect, getScrollInlineStart, Portal } from '@cloudscape-design/component-toolkit/internal';\nimport styles from './styles.css.js';\nexport default function PortalOverlay({\n  track,\n  isDisabled,\n  children\n}) {\n  const ref = useRef(null);\n  useEffect(() => {\n    if (track.current === null || isDisabled) {\n      return;\n    }\n    let cleanedUp = false;\n    let lastX;\n    let lastY;\n    let lastInlineSize;\n    let lastBlockSize;\n    const updateElement = () => {\n      // It could be that the portal hasn't been attached to the DOM yet - ensure the ref exists and is attached DOM tree.\n      if (track.current && ref.current && document.body.contains(ref.current)) {\n        const isRtl = getIsRtl(ref.current);\n        const {\n          insetInlineStart,\n          insetBlockStart,\n          inlineSize,\n          blockSize\n        } = getLogicalBoundingClientRect(track.current);\n        // For simplicity, we just make all our calculations independent of\n        // the browser's scrolling edge. When it comes to applying the changes,\n        // translate is independent of writing direction, so we need to invert\n        // the X coordinate ourselves just before applying the values.\n        const newX = (insetInlineStart + getScrollInlineStart(document.documentElement)) * (isRtl ? -1 : 1);\n        const newY = insetBlockStart + document.documentElement.scrollTop;\n        if (lastX !== newX || lastY !== newY) {\n          ref.current.style.translate = `${newX}px ${newY}px`;\n          lastX = newX;\n          lastY = newY;\n        }\n        if (lastInlineSize !== inlineSize || lastBlockSize !== blockSize) {\n          ref.current.style.width = `${inlineSize}px`;\n          ref.current.style.height = `${blockSize}px`;\n          lastInlineSize = inlineSize;\n          lastBlockSize = blockSize;\n        }\n      }\n      if (!cleanedUp) {\n        requestAnimationFrame(updateElement);\n      }\n    };\n    updateElement();\n    return () => {\n      cleanedUp = true;\n    };\n  }, [isDisabled, track]);\n  if (track === null) {\n    return null;\n  }\n  return React.createElement(Portal, null, React.createElement(\"span\", {\n    ref: ref,\n    className: styles['portal-overlay']\n  }, React.createElement(\"span\", {\n    className: styles['portal-overlay-contents']\n  }, children)));\n}","map":{"version":3,"names":["React","useEffect","useRef","getIsRtl","getLogicalBoundingClientRect","getScrollInlineStart","Portal","styles","PortalOverlay","track","isDisabled","children","ref","current","cleanedUp","lastX","lastY","lastInlineSize","lastBlockSize","updateElement","document","body","contains","isRtl","insetInlineStart","insetBlockStart","inlineSize","blockSize","newX","documentElement","newY","scrollTop","style","translate","width","height","requestAnimationFrame","createElement","className"],"sources":["/Users/theo/Library/CloudStorage/OneDrive-RackspaceInc/Documents/aws_hackathon/react-client/node_modules/src/internal/components/drag-handle-wrapper/portal-overlay.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useEffect, useRef } from 'react';\n\nimport {\n  getIsRtl,\n  getLogicalBoundingClientRect,\n  getScrollInlineStart,\n  Portal,\n} from '@cloudscape-design/component-toolkit/internal';\n\nimport styles from './styles.css.js';\n\nexport default function PortalOverlay({\n  track,\n  isDisabled,\n  children,\n}: {\n  track: React.RefObject<HTMLElement | null>;\n  isDisabled: boolean;\n  children: React.ReactNode;\n}) {\n  const ref = useRef<HTMLSpanElement | null>(null);\n\n  useEffect(() => {\n    if (track.current === null || isDisabled) {\n      return;\n    }\n\n    let cleanedUp = false;\n    let lastX: number | undefined;\n    let lastY: number | undefined;\n    let lastInlineSize: number | undefined;\n    let lastBlockSize: number | undefined;\n    const updateElement = () => {\n      // It could be that the portal hasn't been attached to the DOM yet - ensure the ref exists and is attached DOM tree.\n      if (track.current && ref.current && document.body.contains(ref.current)) {\n        const isRtl = getIsRtl(ref.current);\n        const { insetInlineStart, insetBlockStart, inlineSize, blockSize } = getLogicalBoundingClientRect(\n          track.current\n        );\n        // For simplicity, we just make all our calculations independent of\n        // the browser's scrolling edge. When it comes to applying the changes,\n        // translate is independent of writing direction, so we need to invert\n        // the X coordinate ourselves just before applying the values.\n        const newX = (insetInlineStart + getScrollInlineStart(document.documentElement)) * (isRtl ? -1 : 1);\n        const newY = insetBlockStart + document.documentElement.scrollTop;\n        if (lastX !== newX || lastY !== newY) {\n          ref.current.style.translate = `${newX}px ${newY}px`;\n          lastX = newX;\n          lastY = newY;\n        }\n        if (lastInlineSize !== inlineSize || lastBlockSize !== blockSize) {\n          ref.current.style.width = `${inlineSize}px`;\n          ref.current.style.height = `${blockSize}px`;\n          lastInlineSize = inlineSize;\n          lastBlockSize = blockSize;\n        }\n      }\n      if (!cleanedUp) {\n        requestAnimationFrame(updateElement);\n      }\n    };\n    updateElement();\n\n    return () => {\n      cleanedUp = true;\n    };\n  }, [isDisabled, track]);\n\n  if (track === null) {\n    return null;\n  }\n\n  return (\n    <Portal>\n      <span ref={ref} className={styles['portal-overlay']}>\n        <span className={styles['portal-overlay-contents']}>{children}</span>\n      </span>\n    </Portal>\n  );\n}\n"],"mappings":"AAAA;AACA;AACA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAEhD,SACEC,QAAQ,EACRC,4BAA4B,EAC5BC,oBAAoB,EACpBC,MAAM,QACD,+CAA+C;AAEtD,OAAOC,MAAM,MAAM,iBAAiB;AAEpC,eAAc,SAAUC,aAAaA,CAAC;EACpCC,KAAK;EACLC,UAAU;EACVC;AAAQ,CAKT;EACC,MAAMC,GAAG,GAAGV,MAAM,CAAyB,IAAI,CAAC;EAEhDD,SAAS,CAAC,MAAK;IACb,IAAIQ,KAAK,CAACI,OAAO,KAAK,IAAI,IAAIH,UAAU,EAAE;MACxC;;IAGF,IAAII,SAAS,GAAG,KAAK;IACrB,IAAIC,KAAyB;IAC7B,IAAIC,KAAyB;IAC7B,IAAIC,cAAkC;IACtC,IAAIC,aAAiC;IACrC,MAAMC,aAAa,GAAGA,CAAA,KAAK;MACzB;MACA,IAAIV,KAAK,CAACI,OAAO,IAAID,GAAG,CAACC,OAAO,IAAIO,QAAQ,CAACC,IAAI,CAACC,QAAQ,CAACV,GAAG,CAACC,OAAO,CAAC,EAAE;QACvE,MAAMU,KAAK,GAAGpB,QAAQ,CAACS,GAAG,CAACC,OAAO,CAAC;QACnC,MAAM;UAAEW,gBAAgB;UAAEC,eAAe;UAAEC,UAAU;UAAEC;QAAS,CAAE,GAAGvB,4BAA4B,CAC/FK,KAAK,CAACI,OAAO,CACd;QACD;QACA;QACA;QACA;QACA,MAAMe,IAAI,GAAG,CAACJ,gBAAgB,GAAGnB,oBAAoB,CAACe,QAAQ,CAACS,eAAe,CAAC,KAAKN,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;QACnG,MAAMO,IAAI,GAAGL,eAAe,GAAGL,QAAQ,CAACS,eAAe,CAACE,SAAS;QACjE,IAAIhB,KAAK,KAAKa,IAAI,IAAIZ,KAAK,KAAKc,IAAI,EAAE;UACpClB,GAAG,CAACC,OAAO,CAACmB,KAAK,CAACC,SAAS,GAAG,GAAGL,IAAI,MAAME,IAAI,IAAI;UACnDf,KAAK,GAAGa,IAAI;UACZZ,KAAK,GAAGc,IAAI;;QAEd,IAAIb,cAAc,KAAKS,UAAU,IAAIR,aAAa,KAAKS,SAAS,EAAE;UAChEf,GAAG,CAACC,OAAO,CAACmB,KAAK,CAACE,KAAK,GAAG,GAAGR,UAAU,IAAI;UAC3Cd,GAAG,CAACC,OAAO,CAACmB,KAAK,CAACG,MAAM,GAAG,GAAGR,SAAS,IAAI;UAC3CV,cAAc,GAAGS,UAAU;UAC3BR,aAAa,GAAGS,SAAS;;;MAG7B,IAAI,CAACb,SAAS,EAAE;QACdsB,qBAAqB,CAACjB,aAAa,CAAC;;IAExC,CAAC;IACDA,aAAa,EAAE;IAEf,OAAO,MAAK;MACVL,SAAS,GAAG,IAAI;IAClB,CAAC;EACH,CAAC,EAAE,CAACJ,UAAU,EAAED,KAAK,CAAC,CAAC;EAEvB,IAAIA,KAAK,KAAK,IAAI,EAAE;IAClB,OAAO,IAAI;;EAGb,OACET,KAAA,CAAAqC,aAAA,CAAC/B,MAAM,QACLN,KAAA,CAAAqC,aAAA;IAAMzB,GAAG,EAAEA,GAAG;IAAE0B,SAAS,EAAE/B,MAAM,CAAC,gBAAgB;EAAC,GACjDP,KAAA,CAAAqC,aAAA;IAAMC,SAAS,EAAE/B,MAAM,CAAC,yBAAyB;EAAC,GAAGI,QAAQ,CAAQ,CAChE,CACA;AAEb","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
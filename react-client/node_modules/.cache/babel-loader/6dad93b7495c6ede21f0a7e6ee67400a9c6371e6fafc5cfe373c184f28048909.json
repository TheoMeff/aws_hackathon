{"ast":null,"code":"import { __rest } from \"tslib\";\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useRef } from 'react';\nimport clsx from 'clsx';\nimport { Portal } from '@cloudscape-design/component-toolkit/internal';\nimport Icon from '../../icon/internal';\nimport { useSingleTabStopNavigation } from '../../internal/context/single-tab-stop-navigation-context';\nimport useHiddenDescription from '../../internal/hooks/use-hidden-description';\nimport { usePortalModeClasses } from '../../internal/hooks/use-portal-mode-classes';\nimport InternalLiveRegion from '../../live-region/internal';\nimport Arrow from '../../popover/arrow';\nimport PopoverBody from '../../popover/body';\nimport PopoverContainer from '../../popover/container';\nimport { useClickAway } from './click-away';\nimport { TableTdElement } from './td-element';\nimport styles from './styles.css.js';\nexport function DisabledInlineEditor(_a) {\n  var _b;\n  var {\n      item,\n      column,\n      ariaLabels,\n      isEditing,\n      onEditStart,\n      onEditEnd,\n      editDisabledReason\n    } = _a,\n    rest = __rest(_a, [\"item\", \"column\", \"ariaLabels\", \"isEditing\", \"onEditStart\", \"onEditEnd\", \"editDisabledReason\"]);\n  const isExpandableColumn = rest.level !== undefined;\n  const clickAwayRef = useClickAway(() => {\n    if (isEditing) {\n      onEditEnd(true);\n    }\n  });\n  const iconRef = useRef(null);\n  const buttonRef = useRef(null);\n  const portalRef = useRef(null);\n  function handleEscape(event) {\n    if (event.key === 'Escape') {\n      onEditEnd(true);\n    }\n  }\n  const onClick = () => {\n    var _a;\n    onEditStart();\n    (_a = buttonRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n  };\n  const {\n    targetProps,\n    descriptionEl\n  } = useHiddenDescription(editDisabledReason);\n  const portalClasses = usePortalModeClasses(portalRef);\n  const {\n    tabIndex\n  } = useSingleTabStopNavigation(buttonRef);\n  return React.createElement(TableTdElement, Object.assign({}, rest, {\n    nativeAttributes: {\n      'data-inline-editing-active': isEditing.toString()\n    },\n    isEditing: isEditing,\n    isEditingDisabled: true,\n    onClick: !isEditing && !isExpandableColumn ? onClick : undefined,\n    ref: !isExpandableColumn ? clickAwayRef : undefined\n  }), column.cell(item), React.createElement(\"div\", {\n    className: styles['body-cell-editor-wrapper']\n  }, React.createElement(\"div\", {\n    ref: isExpandableColumn ? clickAwayRef : undefined\n  }, React.createElement(\"button\", Object.assign({\n    ref: buttonRef,\n    tabIndex: tabIndex,\n    className: clsx(styles['body-cell-editor'], styles['body-cell-editor-disabled'], isExpandableColumn && styles['body-cell-editor-focusable']),\n    onClick: !isEditing && isExpandableColumn ? onClick : undefined,\n    \"aria-label\": (_b = ariaLabels === null || ariaLabels === void 0 ? void 0 : ariaLabels.activateEditLabel) === null || _b === void 0 ? void 0 : _b.call(ariaLabels, column, item),\n    \"aria-haspopup\": \"dialog\",\n    \"aria-disabled\": \"true\",\n    onKeyDown: handleEscape\n  }, targetProps), React.createElement(\"span\", {\n    className: styles['body-cell-editor-icon']\n  }, React.createElement(Icon, {\n    name: \"lock-private\",\n    variant: \"normal\",\n    __internalRootRef: iconRef\n  })), descriptionEl))), isEditing && React.createElement(\"span\", {\n    ref: portalRef\n  }, React.createElement(Portal, null, React.createElement(\"span\", {\n    className: portalClasses\n  }, React.createElement(PopoverContainer, {\n    size: \"medium\",\n    fixedWidth: false,\n    position: \"top\",\n    trackRef: iconRef,\n    arrow: position => React.createElement(Arrow, {\n      position: position\n    }),\n    renderWithPortal: true,\n    zIndex: 7000\n  }, React.createElement(PopoverBody, {\n    dismissButton: false,\n    dismissAriaLabel: undefined,\n    header: null,\n    onDismiss: () => {},\n    overflowVisible: \"both\"\n  }, React.createElement(InternalLiveRegion, {\n    tagName: \"span\"\n  }, editDisabledReason)))))));\n}","map":{"version":3,"names":["React","useRef","clsx","Portal","Icon","useSingleTabStopNavigation","useHiddenDescription","usePortalModeClasses","InternalLiveRegion","Arrow","PopoverBody","PopoverContainer","useClickAway","TableTdElement","styles","DisabledInlineEditor","_a","item","column","ariaLabels","isEditing","onEditStart","onEditEnd","editDisabledReason","rest","__rest","isExpandableColumn","level","undefined","clickAwayRef","iconRef","buttonRef","portalRef","handleEscape","event","key","onClick","current","focus","targetProps","descriptionEl","portalClasses","tabIndex","createElement","Object","assign","nativeAttributes","toString","isEditingDisabled","ref","cell","className","_b","activateEditLabel","call","onKeyDown","name","variant","__internalRootRef","size","fixedWidth","position","trackRef","arrow","renderWithPortal","zIndex","dismissButton","dismissAriaLabel","header","onDismiss","overflowVisible","tagName"],"sources":["/Users/theo/Library/CloudStorage/OneDrive-RackspaceInc/Documents/aws_hackathon/react-client/node_modules/src/table/body-cell/disabled-inline-editor.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useRef } from 'react';\nimport clsx from 'clsx';\n\nimport { Portal } from '@cloudscape-design/component-toolkit/internal';\n\nimport Icon from '../../icon/internal';\nimport { useSingleTabStopNavigation } from '../../internal/context/single-tab-stop-navigation-context';\nimport useHiddenDescription from '../../internal/hooks/use-hidden-description';\nimport { usePortalModeClasses } from '../../internal/hooks/use-portal-mode-classes';\nimport InternalLiveRegion from '../../live-region/internal';\nimport Arrow from '../../popover/arrow';\nimport PopoverBody from '../../popover/body';\nimport PopoverContainer from '../../popover/container';\nimport { useClickAway } from './click-away';\nimport { TableBodyCellProps } from './index';\nimport { TableTdElement, TableTdElementProps } from './td-element';\n\nimport styles from './styles.css.js';\n\ninterface DisabledInlineEditorProps<ItemType> extends TableBodyCellProps<ItemType> {\n  editDisabledReason: string;\n}\n\nexport function DisabledInlineEditor<ItemType>({\n  item,\n  column,\n  ariaLabels,\n  isEditing,\n  onEditStart,\n  onEditEnd,\n  editDisabledReason,\n  ...rest\n}: DisabledInlineEditorProps<ItemType>) {\n  const isExpandableColumn = rest.level !== undefined;\n  const clickAwayRef = useClickAway(() => {\n    if (isEditing) {\n      onEditEnd(true);\n    }\n  });\n\n  const iconRef = useRef(null);\n  const buttonRef = useRef<HTMLButtonElement>(null);\n  const portalRef = useRef<HTMLSpanElement>(null);\n\n  function handleEscape(event: React.KeyboardEvent): void {\n    if (event.key === 'Escape') {\n      onEditEnd(true);\n    }\n  }\n\n  const onClick = () => {\n    onEditStart();\n    buttonRef.current?.focus();\n  };\n\n  const { targetProps, descriptionEl } = useHiddenDescription(editDisabledReason);\n  const portalClasses = usePortalModeClasses(portalRef);\n\n  const { tabIndex } = useSingleTabStopNavigation(buttonRef);\n\n  return (\n    <TableTdElement\n      {...rest}\n      nativeAttributes={\n        { 'data-inline-editing-active': isEditing.toString() } as TableTdElementProps['nativeAttributes']\n      }\n      isEditing={isEditing}\n      isEditingDisabled={true}\n      onClick={!isEditing && !isExpandableColumn ? onClick : undefined}\n      ref={!isExpandableColumn ? clickAwayRef : undefined}\n    >\n      {column.cell(item)}\n\n      <div className={styles['body-cell-editor-wrapper']}>\n        <div ref={isExpandableColumn ? clickAwayRef : undefined}>\n          <button\n            ref={buttonRef}\n            tabIndex={tabIndex}\n            className={clsx(\n              styles['body-cell-editor'],\n              styles['body-cell-editor-disabled'],\n              isExpandableColumn && styles['body-cell-editor-focusable']\n            )}\n            onClick={!isEditing && isExpandableColumn ? onClick : undefined}\n            aria-label={ariaLabels?.activateEditLabel?.(column, item)}\n            aria-haspopup=\"dialog\"\n            aria-disabled=\"true\"\n            onKeyDown={handleEscape}\n            {...targetProps}\n          >\n            <span className={styles['body-cell-editor-icon']}>\n              <Icon name=\"lock-private\" variant=\"normal\" __internalRootRef={iconRef} />\n            </span>\n            {descriptionEl}\n          </button>\n        </div>\n      </div>\n\n      {isEditing && (\n        <span ref={portalRef}>\n          <Portal>\n            <span className={portalClasses}>\n              <PopoverContainer\n                size=\"medium\"\n                fixedWidth={false}\n                position=\"top\"\n                trackRef={iconRef}\n                arrow={position => <Arrow position={position} />}\n                renderWithPortal={true}\n                zIndex={7000} // When used in portal we need z-index to be higher than modal's\n              >\n                <PopoverBody\n                  dismissButton={false}\n                  dismissAriaLabel={undefined}\n                  header={null}\n                  onDismiss={() => {}}\n                  overflowVisible=\"both\"\n                >\n                  <InternalLiveRegion tagName=\"span\">{editDisabledReason}</InternalLiveRegion>\n                </PopoverBody>\n              </PopoverContainer>\n            </span>\n          </Portal>\n        </span>\n      )}\n    </TableTdElement>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
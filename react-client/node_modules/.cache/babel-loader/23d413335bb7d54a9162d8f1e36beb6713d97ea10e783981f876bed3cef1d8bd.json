{"ast":null,"code":"import { __rest } from \"tslib\";\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useEffect, useRef } from 'react';\nimport clsx from 'clsx';\nimport { findUpUntil } from '@cloudscape-design/component-toolkit/dom';\nimport { useMergeRefs, useStableCallback } from '@cloudscape-design/component-toolkit/internal';\nimport { getBaseProps } from '../../base-component';\nimport { fireKeyboardEvent, fireNonCancelableEvent } from '../../events';\nimport styles from './styles.css.js';\nconst BOTTOM_TRIGGER_OFFSET = 80;\nconst getItemIndex = (containerRef, event) => {\n  const target = findUpUntil(event.target, element => element === containerRef.current || !!element.dataset.mouseTarget);\n  const mouseTarget = target === null || target === void 0 ? void 0 : target.dataset.mouseTarget;\n  return mouseTarget ? parseInt(mouseTarget) : -1;\n};\nconst OptionsList = (_a, ref) => {\n  var {\n      open,\n      statusType,\n      children,\n      nativeAttributes = {},\n      onKeyDown,\n      onBlur,\n      onFocus,\n      onLoadMore,\n      onMouseUp,\n      onMouseMove,\n      position = 'relative',\n      role = 'listbox',\n      decreaseBlockMargin = false,\n      ariaLabel,\n      ariaLabelledby,\n      ariaDescribedby,\n      embedded,\n      stickyItemBlockSize\n    } = _a,\n    restProps = __rest(_a, [\"open\", \"statusType\", \"children\", \"nativeAttributes\", \"onKeyDown\", \"onBlur\", \"onFocus\", \"onLoadMore\", \"onMouseUp\", \"onMouseMove\", \"position\", \"role\", \"decreaseBlockMargin\", \"ariaLabel\", \"ariaLabelledby\", \"ariaDescribedby\", \"embedded\", \"stickyItemBlockSize\"]);\n  const baseProps = getBaseProps(restProps);\n  const menuRef = useRef(null);\n  const handleScroll = useStableCallback(() => {\n    const scrollContainer = menuRef === null || menuRef === void 0 ? void 0 : menuRef.current;\n    if (scrollContainer) {\n      const bottomEdgePosition = scrollContainer.scrollTop + scrollContainer.clientHeight;\n      const remainingScrollHeight = scrollContainer.scrollHeight - bottomEdgePosition;\n      if (remainingScrollHeight < BOTTOM_TRIGGER_OFFSET) {\n        fireNonCancelableEvent(onLoadMore);\n      }\n    }\n  });\n  useEffect(() => {\n    if (open && statusType === 'pending') {\n      handleScroll();\n    }\n  }, [open, statusType, handleScroll]);\n  const className = clsx(styles['options-list'], {\n    [styles['decrease-block-margin']]: decreaseBlockMargin,\n    [styles['options-list-embedded']]: embedded\n  });\n  const mergedRef = useMergeRefs(ref, menuRef);\n  return React.createElement(\"ul\", Object.assign({}, baseProps, nativeAttributes, {\n    className: className,\n    ref: mergedRef,\n    style: {\n      position,\n      scrollPaddingBlockStart: stickyItemBlockSize !== null && stickyItemBlockSize !== void 0 ? stickyItemBlockSize : undefined\n    },\n    role: role,\n    onScroll: handleScroll,\n    onKeyDown: event => fireKeyboardEvent(onKeyDown, event),\n    onMouseMove: event => onMouseMove === null || onMouseMove === void 0 ? void 0 : onMouseMove(getItemIndex(menuRef, event)),\n    onMouseUp: event => onMouseUp === null || onMouseUp === void 0 ? void 0 : onMouseUp(getItemIndex(menuRef, event)),\n    onBlur: event => fireNonCancelableEvent(onBlur, {\n      relatedTarget: event.relatedTarget\n    }),\n    onFocus: () => fireNonCancelableEvent(onFocus),\n    tabIndex: embedded ? 0 : -1,\n    \"aria-label\": ariaLabel,\n    \"aria-labelledby\": ariaLabelledby,\n    \"aria-describedby\": ariaDescribedby\n  }), open && children);\n};\nexport default React.forwardRef(OptionsList);","map":{"version":3,"names":["React","useEffect","useRef","clsx","findUpUntil","useMergeRefs","useStableCallback","getBaseProps","fireKeyboardEvent","fireNonCancelableEvent","styles","BOTTOM_TRIGGER_OFFSET","getItemIndex","containerRef","event","target","element","current","dataset","mouseTarget","parseInt","OptionsList","_a","ref","open","statusType","children","nativeAttributes","onKeyDown","onBlur","onFocus","onLoadMore","onMouseUp","onMouseMove","position","role","decreaseBlockMargin","ariaLabel","ariaLabelledby","ariaDescribedby","embedded","stickyItemBlockSize","restProps","__rest","baseProps","menuRef","handleScroll","scrollContainer","bottomEdgePosition","scrollTop","clientHeight","remainingScrollHeight","scrollHeight","className","mergedRef","createElement","Object","assign","style","scrollPaddingBlockStart","undefined","onScroll","relatedTarget","tabIndex","forwardRef"],"sources":["/Users/theo/Library/CloudStorage/OneDrive-RackspaceInc/Documents/aws_hackathon/react-client/node_modules/src/internal/components/options-list/index.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useEffect, useRef } from 'react';\nimport clsx from 'clsx';\n\nimport { findUpUntil } from '@cloudscape-design/component-toolkit/dom';\nimport { useMergeRefs, useStableCallback } from '@cloudscape-design/component-toolkit/internal';\n\nimport { BaseComponentProps, getBaseProps } from '../../base-component';\nimport {\n  BaseKeyDetail,\n  CancelableEventHandler,\n  fireKeyboardEvent,\n  fireNonCancelableEvent,\n  NonCancelableEventHandler,\n} from '../../events';\nimport { DropdownStatusProps } from '../dropdown-status';\n\nimport styles from './styles.css.js';\n\nexport interface OptionsListProps extends BaseComponentProps {\n  open?: boolean;\n  statusType: DropdownStatusProps.StatusType;\n  /**\n   * Options list\n   */\n  children: React.ReactNode;\n  nativeAttributes?: Record<string, any>;\n  /**\n   * Called when more items need to be loaded.\n   */\n  onLoadMore?: NonCancelableEventHandler;\n  onKeyDown?: CancelableEventHandler<BaseKeyDetail>;\n  onBlur?: NonCancelableEventHandler<{ relatedTarget: Node | null }>;\n  onFocus?: NonCancelableEventHandler;\n  onMouseUp?: (itemIndex: number) => void;\n  onMouseMove?: (itemIndex: number) => void;\n  position?: React.CSSProperties['position'];\n  role?: 'listbox' | 'list' | 'menu';\n  ariaLabel?: string;\n  ariaLabelledby?: string;\n  ariaDescribedby?: string;\n  decreaseBlockMargin?: boolean;\n  embedded?: boolean;\n  stickyItemBlockSize?: number | null;\n}\n\nconst BOTTOM_TRIGGER_OFFSET = 80;\n\nconst getItemIndex = (containerRef: React.RefObject<HTMLElement>, event: React.MouseEvent) => {\n  const target = findUpUntil(\n    event.target as HTMLElement,\n    element => element === containerRef.current || !!element.dataset.mouseTarget\n  );\n  const mouseTarget = target?.dataset.mouseTarget;\n  return mouseTarget ? parseInt(mouseTarget) : -1;\n};\n\nconst OptionsList = (\n  {\n    open,\n    statusType,\n    children,\n    nativeAttributes = {},\n    onKeyDown,\n    onBlur,\n    onFocus,\n    onLoadMore,\n    onMouseUp,\n    onMouseMove,\n    position = 'relative',\n    role = 'listbox',\n    decreaseBlockMargin = false,\n    ariaLabel,\n    ariaLabelledby,\n    ariaDescribedby,\n    embedded,\n    stickyItemBlockSize,\n    ...restProps\n  }: OptionsListProps,\n  ref: React.Ref<HTMLUListElement>\n) => {\n  const baseProps = getBaseProps(restProps);\n  const menuRef = useRef<HTMLUListElement>(null);\n\n  const handleScroll = useStableCallback(() => {\n    const scrollContainer = menuRef?.current;\n    if (scrollContainer) {\n      const bottomEdgePosition = scrollContainer.scrollTop + scrollContainer.clientHeight;\n      const remainingScrollHeight = scrollContainer.scrollHeight - bottomEdgePosition;\n      if (remainingScrollHeight < BOTTOM_TRIGGER_OFFSET) {\n        fireNonCancelableEvent(onLoadMore);\n      }\n    }\n  });\n\n  useEffect(() => {\n    if (open && statusType === 'pending') {\n      handleScroll();\n    }\n  }, [open, statusType, handleScroll]);\n\n  const className = clsx(styles['options-list'], {\n    [styles['decrease-block-margin']]: decreaseBlockMargin,\n    [styles['options-list-embedded']]: embedded,\n  });\n\n  const mergedRef = useMergeRefs(ref, menuRef);\n\n  return (\n    <ul\n      {...baseProps}\n      {...nativeAttributes}\n      className={className}\n      ref={mergedRef}\n      style={{ position, scrollPaddingBlockStart: stickyItemBlockSize ?? undefined }}\n      role={role}\n      onScroll={handleScroll}\n      onKeyDown={event => fireKeyboardEvent(onKeyDown, event)}\n      onMouseMove={event => onMouseMove?.(getItemIndex(menuRef, event))}\n      onMouseUp={event => onMouseUp?.(getItemIndex(menuRef, event))}\n      onBlur={event => fireNonCancelableEvent(onBlur, { relatedTarget: event.relatedTarget })}\n      onFocus={() => fireNonCancelableEvent(onFocus)}\n      tabIndex={embedded ? 0 : -1}\n      aria-label={ariaLabel}\n      aria-labelledby={ariaLabelledby}\n      aria-describedby={ariaDescribedby}\n    >\n      {open && children}\n    </ul>\n  );\n};\n\nexport default React.forwardRef(OptionsList);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}